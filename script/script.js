let savollar = [
    {
        savol: "Tabiatdagi turli tirik organizmlarning suvga nisbatan ehtiyoji turlicha bo'ladi chunki ular turli namlik sharoitida yashashga moslashganlar. Bu jihatdan organizmlarning guruhi qanday nomlanadi",
        variantlar: ["suvli hayvonlar",
            "biofillar",
            "gidrofillar",
            "baliqlar"],
        javob: "gidrofillar"
    },

    {
        savol: "tirik organizmlarning hayotiga va geografik tarqalishiga ta'sir etuvchi (ijobiy va salbiy) shart sharoitlar nima deb ataladi",
        variantlar: ["ekologik omil",
            "biogenetik omil",
            "sotsiogenetik omil",
            "biotik omil"],
        javob: 'ekologik omil'
    },

    {
        savol: " Tirik organizmlar tomonidan yaratiladigan va o‘zlashtiriladigan toshko‘mir, bitum, neft va ohaktosh kabi moddalar qanday nomlanadi?",
        variantlar: ["biologik moddalar",
            'biogen moddalar',
            "resurs moddalar",
            ' ijtimoiy-g‘oyaviy, aksiologik, didaktik'],
        javob: 'biogen moddalar'
    },

    {
        savol: " Bir organizm hayot faoliyatining boshqalariga ta ’siri va ulami o‘rab turgan muhiti ........................ omillar deyiladi.",
        variantlar: ['odam',
            'jonzot',
            'biogen',
            'biotik'],
        javob: 'biotik'
    },

    {
        savol: 'Suv muhitida gidrobiontlarning suvni qarshiligini kesib yurishga mos tana tuzilishi, plankton organizmlarning suvda osilgan holda yashashi, o‘simliklar dunyosida cho‘l sharoitida minimum suv sarflashga moslashish sifatida barglarning reduktsiyalanishi yoki butunlay bo‘lmasligi moslanishning qaysi turiga misol bo‘ladi?',
        variantlar: ['morfologik', 
            'gidrolog',
            'arxeolog',
            'kosmetolog'],
        javob: 'morfologik'
    },

    {
        savol: ' Organizmga tashqi muhit ta’siri muhimligini, ayrim kasalliklar suv va havo orqali tarqalishi haqida fikrlar bayon qilgan alloma kim?',
        variantlar: ['Abu Ali Ibn Sino',
            'Abu Rayhon Beruniy',
            "Mirzo Ulug'bek",
             'Alisher Navoiy'],
        javob: 'Abu Ali Ibn Sino'
    },

    {
        savol: 'Ekologiya fanining asoschisi kim?',
        variantlar: ['E.Gekkel',
            'Arximed',
            'Ch.Darvin',
            'J.Laura'],
        javob: 'E.Gekkel'
    },

    {
        savol: 'Yer yuzining muayyan hududida yashaydigan o‘simliklar, hayvonlar va mikroorganizmlarning, shu hudud landshafti, iqlim, tuproq hamda gidrologik sharoitlari bilan birligini biogeotsenoz deb nomlagan olim kim?',
        variantlar: [' V.N.Sukachev',
            'I.Pavlov',
            'J.Laura',
            'L.Edgor'
        ],
        javob: ' V.N.Sukachev'
    },

    {
        savol: 'Ekologik omillar yig‘indisi organizmlarning o‘sishi, rivojlanishi, yashab qolishi, organizmlarning ko‘payishiga sabab bo‘ladi, ularning mavjudlik sharoitini tavsiflaydi. Ekologik omillar necha turga ajratiladi?',
        variantlar: ['3',
            '2',
            '4',
            '5'],
        javob: '3'
    },

    {
        savol: 'Oqova suvlardagi organik chiqindilardan va oksidlanadigan yoki yomon oksidlanadigan organik moddalarni parchalab tozalash usuli qanday?',
        variantlar: ['fizik-kimyoviy',
            'Biologik-kimiyoviy',
            'zaharli dorilar bilan',
            'xlorli usul'],
        javob: 'fizik-kimyoviy'
    },

    {
        savol: 'Aholining barcha qatlamlarida, jumladan, maktab o‘quvchilarida ularning atrof-muhitga, jonajon tabiatimizga bo‘lgan ongli munosabatlarini to‘g‘ri shakllantirishga qaratilgan tadbirlar majmui qanday nomlanadi.',
        variantlar: ['Ekologik ta’lim-tarbiyaning bosh maqsadi',
            'Ekologik madaniyatning bosh maqsadi',
            'Ekologik bilishning bosh maqsadi',
            'Ekologik tartib bosh maqsadi'],
        javob: 'Ekologik ta’lim-tarbiyaning bosh maqsadi'
    },

    {
        savol: 'Fedchenko muzligi qaerda joylashgan',
        variantlar: ["Andijon tog'ida",
            'Pomir tog‘ida',
            'Husor',
            "Qoratog' tog' tizmasida"],
        javob: 'Fedchenko muzligi qaerda joylashgan'
    },

    {
        savol: 'Kishilarning atrof-tabiiy muhitni muhofaza qilish, tabiiy resurslardan oqilona foydalanish, buzilgan tabiat majmua (kompleks) larini qayta tiklash haqida ma’lumotlarga ega bo‘lish, ya’ni ushbu voqelikning inson tafakkurida aks etganlik darajasi.......................... deb ataladi?',
        variantlar: ['ekologik bilim',
            'ekologik tarbiya',
            'ekologik tartib',
            'ekologik madaniyat'],
        javob: 'ekologik bilim'
    },

    {
        savol: 'O‘zbekiston Respublikasi hududida nechta qo‘riqxona mavjud.',
        variantlar: ['7 ta',
            '14 ta',
            '8 ta',
            '9 ta'],
        javob: '7 ta'
    },

    {
        savol: ' Sanoatlashgan katta shaharlarda ba’zan shamol esmasligi, iflos havoning bir necha kun turib qolishi natijasida zaharli gaz va changlardan vujudga kelgan achchiq tuman hosil bo‘lishi qanday nomlanadi.',
        variantlar: ['smog',
            'tutun uyumi',
            'zaharli havo',
            'tutunli havo'],
        javob: 'smog'
    },

    {
        savol: 'O‘zbekiston azaldan yerusti va yerosti boyliklarining ko‘pligi va xilma-xilligi bilan ajralib turadi. Respublikamizda 94 mineral xomashyo turlarining nechta konlari topilgan?',
        variantlar: ['850 ta',
            '870 ta',
            '760 ta',
            '880 ta'],
        javob: '850 ta'
    },

    {
        savol: 'Yer iqlimi isishining Shimoliy va Janubiy qutblardagi muzliklarga ta’sirini oʻrganish uchun 2007-yil mart oyida qanday nom ostida ikki yillik tadqiqotlar loyihasi ish boshlagan.',
        variantlar: [' Xalqaro Qutblar yili',
            'Termik isish yili',
            'Tropik yil',
            'Xalqaro Isish yili'],
        javob: 'Xalqaro Qutblar yili'
    },

    {
        savol: ' O‘zbekiston Respublikasi Yer kodeksi qachon qabul qilingan.',
        variantlar: ['1998 yil',
            '1999 yil',
            '2000 yil',
            '1996 yil'],
        javob: '1998 yil'
    },

    {
        savol: '...........................................biosferaning yuqori darajasi, ammo sifat jihatidan boshqa bo‘lib, bunda tabiat ham, inson ham mutlaq yangilangan holda bo‘ladi.',
        variantlar: ['noosfera',
            'Atmosfera',
            'litosfera',
            'Ionosfera'],
        javob: 'noosfera'
    },

    {
        savol: 'O‘zbekistonda mavjud sug‘oriladigan yerlarning qancha qismi u yoki bu darajada sho‘rlangan.',
        variantlar: ['50% dan ortig‘i',
            '65%',
            '60%',
            '30%'],
        javob: '50% dan ortig‘i'
    },

    {
        savol: 'Dunyo suv zahirasining qancha qismi chuchuk suv hisoblanadi.',
        variantlar: ['2-2.5%',
            '2-4%',
            '5-7%',
            '2.6-3%'],
        javob: '2-2.5%'
    },

    {
        savol: 'Jahon yetakchilari qashshoqlikka barham berish, tengsizlikni tugatish va iqlim o‘zgarishiga qarshi kurashishga yo‘naltirilgan, 2030 yilgacha bo‘lgan davrda barqaror rivojlanish sohasidagi Kun tartibini tasdiqladilar. Barqaror rivojlanish maqsadlari - bu dunyoni o‘zgartirishga yo‘naltirilgan maqsaddir. Ular nechta.',
        variantlar: ['17 ta',
            '16 ta',
            '15 ta',
            '18 ta'],
        javob: '17 ta'
    },

    {
        savol: '...........................................biosferaning yuqori darajasi, ammo sifat jihatidan boshqa bo‘lib, bunda tabiat ham, inson ham mutlaq yangilangan holda bo‘ladi.',
        variantlar: ['noosfera',
            'Atmosfera',
            'litosfera',
            'Ionosfera'],
        javob: 'noosfera'
    },

    {
        savol: '...........................................biosferaning yuqori darajasi, ammo sifat jihatidan boshqa bo‘lib, bunda tabiat ham, inson ham mutlaq yangilangan holda bo‘ladi.',
        variantlar: ['noosfera',
            'Atmosfera',
            'litosfera',
            'Ionosfera'],
        javob: 'noosfera'
    },

]


const token = "6011625617:AAH0Afp_QHxI39oKEGn1t6VpeHFT_8bK60s";
const chatId = "5266818172";



document.addEventListener("contextmenu", function (e) {
    e.preventDefault();
});

// document.onkeydown = (e) => {
//     if (e.key == 123) {
//         e.preventDefault();
//     }
//     if (e.ctrlKey && e.shiftKey && e.key.toUpperCase() == "I") {
//         e.preventDefault();
//     }
//     if (e.metaKey && e.shiftKey && e.key.toUpperCase() == "C") {
//         e.preventDefault();
//     }
//     if (e.ctrlKey && e.shiftKey && e.key.toUpperCase() == "C") {
//         e.preventDefault();
//     }
//     if (e.ctrlKey && e.shiftKey && e.key.toUpperCase() == "J") {
//         e.preventDefault();
//     }
//     if (e.ctrlKey && e.key.toUpperCase() == "U") {
//         e.preventDefault();
//     }
// };













let correct_answers = 0;
let wrong_answers = []
let wrong_answers_answer = []

function testing() {
    let question = document.querySelector('#question');
    let variant1 = document.querySelector('#variant1')
    let variant2 = document.querySelector('#variant2')
    let variant3 = document.querySelector('#variant3')
    let variant4 = document.querySelector('#variant4')




    let randomSon = Math.floor(Math.random(savollar.length) * 10);
    let newMassiv = []

    for (let i = 0; i <= savollar.length; i++) {
        let element = savollar.at(randomSon - i);
        newMassiv.push(element)
    }




    let count = 0;
    question.textContent = `${count + 1}.${newMassiv[0].savol}`
    variant1.textContent = `A) ${newMassiv[0].variantlar[0]}`
    variant2.textContent = `B) ${newMassiv[0].variantlar[3]}`
    variant3.textContent = `C) ${newMassiv[0].variantlar[2]}`
    variant4.textContent = `D) ${newMassiv[0].variantlar[1]}`

    function next_test() {
        count++
        if (count >= savollar.length) {
            test_box.style.display = 'none';
            show_result()
            let fetchBreak = true;
            const message = `Ism: ${userName.value} \n Natija: ${correct_answers} `;
            while (fetchBreak) {
                if (navigator.onLine === false) {
                    alert("Internetingizni yoqing!!! va qaytadan urinib ko'ring");
                } else {
                    fetch(
                        `https://api.telegram.org/bot${token}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(
                            message
                        )}`
                    )
                        .then((response) => response.json())
                        .then((data) => {
                            console.log(message);
                        })
                        .catch((error) => console.error(error));
                    fetchBreak = false;
                }
            }
        }
        else {
            let random_var = Math.floor(Math.random() * 4);
            question.textContent = `${count + 1}.${newMassiv[count].savol}`

            variant1.textContent = `A) ${newMassiv.at(count).variantlar.at(random_var - 0)}`
            variant2.textContent = `B) ${newMassiv.at(count).variantlar.at(random_var - 1)}`
            variant3.textContent = `C) ${newMassiv.at(count).variantlar.at(random_var - 2)}`
            variant4.textContent = `D) ${newMassiv.at(count).variantlar.at(random_var - 3)}`
            variants.forEach((element) => {
                element.classList.remove('correct')
                element.classList.remove('wrong')
            })
        }
    }

    // bu yerdan boshlab testni tekshiruvchi kod yoziladi

    let variants = document.querySelectorAll('.variant');

    variants.forEach((el) => {
        el.addEventListener('click', (event) => {

            if (el.textContent.slice(3) == newMassiv[count].javob) {
                console.log('true')
                el.classList.add('correct')
                correct_answers++;
            }


            else {
                console.log('false')
                el.classList.add('wrong')
                wrong_answers.push(newMassiv[count].savol)
                wrong_answers_answer.push(newMassiv[count].javob)
                console.log(wrong_answers)
                console.log(wrong_answers_answer)
            }

            // console.log(el.textContent.slice(3))
            // console.log(newMassiv[count].javob)

            setTimeout(next_test, 300)
        })
    })

}

let test_box = document.querySelector('.test-box');

test_box.style.display = 'none';



let start = document.querySelector('#start-test')
var userName = document.querySelector('#user-name')
let must_fill = document.querySelector('#required')
let user_win = document.querySelector('.user')

start.addEventListener('click', () => {
    if (userName.value.length > 0) {
        test_box.style.display = 'flex'
        user_win.style.display = 'none'
        testing()
    }

    else {
        must_fill.textContent = "Ism familyani kiriting iltimos"
    }


})



let result = document.querySelector('.result')
let u_name = document.querySelector('#name')
let result_span = document.querySelector('#result')
let wrongs = document.querySelector('#my_wrong')
let show_hide = document.querySelector('#show-me')

result.style.display = 'none'
function show_result() {
    result.style.display = 'block'
    u_name.textContent = 'Name: ' + userName.value;
    result_span.textContent = `Natija: siz ${correct_answers}/${savollar.length} natijaga erishdingiz`

    for (let i = 0; i < wrong_answers.length; i++) {
        wrongs.innerHTML += `<p>Savol: ${wrong_answers[i]}</p>`
        wrongs.innerHTML += `<p>Javob: ${wrong_answers_answer[i].slice()}</p><br><hr>
                `
    }
    show_hide.addEventListener('click', () => {
        wrongs.classList.toggle('show-hide')
    })
}





